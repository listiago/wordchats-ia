name: ğŸš€ Deploy to Hostinger

on:
  push:
    branches: [ main ]
  workflow_dispatch:

jobs:
  deploy:
    runs-on: ubuntu-latest

    steps:
    - name: ğŸ“¥ Checkout code
      uses: actions/checkout@v4
      with:
        fetch-depth: 1

    - name: ğŸ”§ Prepare files for deployment
      run: |
        echo "ğŸ§¹ Removendo arquivos desnecessÃ¡rios..."
        rm -rf .git
        rm -rf .github
        rm -f README.md
        rm -f DEPLOY_AUTO.md
        rm -f verify_links.py
        rm -f deploy.sh
        rm -f .gitignore

        echo "ğŸ“‹ Arquivos que serÃ£o enviados:"
        find . -type f -not -path './.*' | head -20

    - name: ğŸ“¤ Deploy to FTP
      uses: SamKirkland/FTP-Deploy-Action@v4.3.4
      with:
        server: ${{ secrets.FTP_HOST }}
        username: ${{ secrets.FTP_USER }}
        password: ${{ secrets.FTP_PASS }}
        port: ${{ secrets.FTP_PORT }}
        local-dir: ./
        server-dir: ${{ secrets.FTP_DIR }}
        timeout: 300000
        log-level: verbose
        exclude: |
          **/.git/**
          **/.github/**
          **/README.md
          **/DEPLOY_AUTO.md
          **/verify_links.py
          **/deploy.sh
          **/.gitignore
          **/.*.swp
          **/.*.tmp

    - name: ğŸ‰ Deploy Complete
      run: |
        echo "âœ… Deploy concluÃ­do com sucesso!"
        echo "ğŸŒ Site atualizado automaticamente via FTP"
